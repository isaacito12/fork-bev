var sourceData2 = {"FileName":"C:\\local\\github-issacito12\\fork-bev\\BEV\\BEV_setup.m","RawFileContents":["%% Model Parameters for Battery Electric Vehicle System Model\r","% This is automatically run in the PostLoadFcn callback of BEV_system_model\r","% and sets referenced subsystems.\r","% Note that the callback is not PreLoadFcn but PostLoadFcn\r","% because the model needs to be loaded before setting referenced subsystems.\r","%\r","% Informational messages from disp are turned off to prevent\r","% the warnings/diagnostics from appearing when the model is opened.\r","\r","% Copyright 2020-2023 The MathWorks, Inc.\r","\r","%% Bus definitions\r","\r","defineBus_HighVoltage\r","defineBus_Rotational\r","\r","%% Vehicle block parameters\r","\r","vehicle.mass_kg = 2400;\r","vehicle.tireRollingRadius_m = 0.34;\r","\r","vehicle.tireRollingCoeff = 0.0136;\r","vehicle.airDragCoeff = 0.31;\r","vehicle.frontalArea_m2 = 0.9 * 1.921 * 1.624;\r","vehicle.gravAccel_m_per_s2 = 9.81;\r","\r","smoothing.vehicle_speedThreshold_kph = 1;\r","smoothing.vehicle_axleSpeedThreshold_rpm = 1;\r","\r","%% Battery parameters\r","\r","batteryHV.nominalVoltage_V = 340;\r","\r","batteryHV.nominalCapacity_kWh = 60;\r","\r","batteryHV.nominalCharge_Ahr = ...\r","  BatteryHV_getAmpereHourRating( ...\r","    Voltage_V = batteryHV.nominalVoltage_V, ...\r","    Capacity_kWh = batteryHV.nominalCapacity_kWh, ...\r","    StateOfCharge_pct = 100 );\r","\r","batteryHV.internalResistance_Ohm = 0.01;\r","\r","batteryHV.ThermalMass_J_per_K = 10e3;\r","\r","% Voltage is 90 % of the nominal when SOC is 50 %.\r","batteryHV.measuredVoltage_V = batteryHV.nominalVoltage_V * 0.9;\r","batteryHV.measuredCharge_Ahr = batteryHV.nominalCharge_Ahr * 0.5;\r","\r","% More thermal model parameters\r","% These parameters are used when thermal model is enabled\r","% in the Battery block from Simscape Electrical.\r","batteryHV.measurementTemperature_K = 273.15 + 25;\r","batteryHV.secondMeasurementTemperature_K = 273.15 + 0;\r","batteryHV.secondNominalVoltage_V = batteryHV.nominalVoltage_V * 0.95;\r","batteryHV.secondInternalResistance_Ohm = batteryHV.internalResistance_Ohm * 2;\r","batteryHV.secondMeasuredVoltage_V = batteryHV.nominalVoltage_V * 0.9;\r","\r","% Ambient parameters for battery thermal simulation\r","\r","batteryHV.ambientTemp_K = 273.15 + 20;\r","\r","batteryHV.ambientMass_t = 10000;\r","batteryHV.ambientSpecificHeat_J_per_Kkg = 1000;\r","\r","batteryHV.RadiationArea_m2 = 1;\r","batteryHV.RadiationCoeff_W_per_K4m2 = 5e-10;\r","\r","%% Motor drive unit parameters\r","\r","motorDriveUnit.trqMax_Nm = 420;\r","motorDriveUnit.powerMax_kW = 220;\r","motorDriveUnit.responseTime_s = 0.02;\r","\r","motorDriveUnit.rotorInertia_kg_m2 = 5*0.01^2;\r","motorDriveUnit.rotorDamping_Nm_per_radps = 1e-5;\r","\r","% Single efficiency measurement\r","motorDriveUnit.efficiency_pct = 95;\r","motorDriveUnit.spd_eff_rpm = 2000;\r","motorDriveUnit.trq_eff_Nm = 50;\r","motorDriveUnit.ironLoss_W = 55;\r","motorDriveUnit.fixedLoss_W = 40;\r","\r","motorDriveUnit.rotorInertia_kg_m2 = 5*0.01^2;\r","motorDriveUnit.rotorDamping_Nm_per_radps = 1e-5;\r","\r","motorDriveUnit.ThermalMass_J_per_K = 90e3;\r","\r","% Ambient parameters for the thermal simulation of  motor drive unit.\r","\r","motorDriveUnit.ambientTemp_K = 273.15 + 20;\r","\r","motorDriveUnit.ambientMass_t = 10000;\r","motorDriveUnit.ambientSpecificHeat_J_per_Kkg = 1000;\r","\r","motorDriveUnit.RadiationArea_m2 = 1;\r","motorDriveUnit.RadiationCoeff_W_per_K4m2 = 5e-10;\r","\r","%% Reducer parameters\r","\r","reducer.GearRatio = 9.1;\r","\r","reducer.Efficiency_normalized = 0.98;\r","\r","smoothing.Reducer_PowerThreshold_W = 1;\r","\r","%% BEV controller parameters\r","\r","% Parameters for converting vehicle speed to motor speed\r","bevControl.MotorSpdRef_tireRollingRadius_m = vehicle.tireRollingRadius_m;\r","bevControl.MotorSpdRef_reductionGearRaio = 9.1;\r","\r","% PI controller gains for motor torque control\r","bevControl.MotorSpdRef_Ki = 15;\r","bevControl.MotorSpdRef_Kp = 15;\r","\r","% Bounds for torque command\r","bevControl.MotorDriveUnit_trqMax_Nm = motorDriveUnit.trqMax_Nm;\r","\r","%% Initial conditions\r","\r","initial.vehicle_speed_kph = 0;\r","initial.motorDriveUnit_RotorSpd_rpm = 0;\r","initial.hvBattery_SOC_pct = 70;\r","\r","initial.hvBattery_Charge_Ahr = ...\r","  BatteryHV_getAmpereHourRating( ...\r","    Voltage_V = batteryHV.nominalVoltage_V, ...\r","    Capacity_kWh = batteryHV.nominalCapacity_kWh, ...\r","    StateOfCharge_pct = initial.hvBattery_SOC_pct );\r","\r","initial.hvBattery_Temperature_K = batteryHV.ambientTemp_K;\r","\r","initial.ambientTemp_K = batteryHV.ambientTemp_K;\r","\r","initial.motorDriveUnit_Temperature_K = motorDriveUnit.ambientTemp_K;\r","initial.ambientTemp_K = motorDriveUnit.ambientTemp_K;\r",""],"CoverageDisplayDataPerLine":{"Function":[],"Statement":[{"LineNumber":14,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":21,"ContinuedLine":false},{"LineNumber":15,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":20,"ContinuedLine":false},{"LineNumber":19,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":23,"ContinuedLine":false},{"LineNumber":20,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":35,"ContinuedLine":false},{"LineNumber":22,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":34,"ContinuedLine":false},{"LineNumber":23,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":28,"ContinuedLine":false},{"LineNumber":24,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":45,"ContinuedLine":false},{"LineNumber":25,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":34,"ContinuedLine":false},{"LineNumber":27,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":41,"ContinuedLine":false},{"LineNumber":28,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":45,"ContinuedLine":false},{"LineNumber":32,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":33,"ContinuedLine":false},{"LineNumber":34,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":35,"ContinuedLine":false},{"LineNumber":36,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":29,"ContinuedLine":false},{"LineNumber":37,"Hits":15,"StartColumnNumbers":2,"EndColumnNumbers":32,"ContinuedLine":true},{"LineNumber":38,"Hits":15,"StartColumnNumbers":4,"EndColumnNumbers":42,"ContinuedLine":true},{"LineNumber":39,"Hits":15,"StartColumnNumbers":4,"EndColumnNumbers":48,"ContinuedLine":true},{"LineNumber":40,"Hits":15,"StartColumnNumbers":4,"EndColumnNumbers":30,"ContinuedLine":true},{"LineNumber":42,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":40,"ContinuedLine":false},{"LineNumber":44,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":37,"ContinuedLine":false},{"LineNumber":47,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":63,"ContinuedLine":false},{"LineNumber":48,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":65,"ContinuedLine":false},{"LineNumber":53,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":49,"ContinuedLine":false},{"LineNumber":54,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":54,"ContinuedLine":false},{"LineNumber":55,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":69,"ContinuedLine":false},{"LineNumber":56,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":78,"ContinuedLine":false},{"LineNumber":57,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":69,"ContinuedLine":false},{"LineNumber":61,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":38,"ContinuedLine":false},{"LineNumber":63,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":32,"ContinuedLine":false},{"LineNumber":64,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":47,"ContinuedLine":false},{"LineNumber":66,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":31,"ContinuedLine":false},{"LineNumber":67,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":44,"ContinuedLine":false},{"LineNumber":71,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":31,"ContinuedLine":false},{"LineNumber":72,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":33,"ContinuedLine":false},{"LineNumber":73,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":37,"ContinuedLine":false},{"LineNumber":75,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":45,"ContinuedLine":false},{"LineNumber":76,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":48,"ContinuedLine":false},{"LineNumber":79,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":35,"ContinuedLine":false},{"LineNumber":80,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":34,"ContinuedLine":false},{"LineNumber":81,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":31,"ContinuedLine":false},{"LineNumber":82,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":31,"ContinuedLine":false},{"LineNumber":83,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":32,"ContinuedLine":false},{"LineNumber":85,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":45,"ContinuedLine":false},{"LineNumber":86,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":48,"ContinuedLine":false},{"LineNumber":88,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":42,"ContinuedLine":false},{"LineNumber":92,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":43,"ContinuedLine":false},{"LineNumber":94,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":37,"ContinuedLine":false},{"LineNumber":95,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":52,"ContinuedLine":false},{"LineNumber":97,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":36,"ContinuedLine":false},{"LineNumber":98,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":49,"ContinuedLine":false},{"LineNumber":102,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":24,"ContinuedLine":false},{"LineNumber":104,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":37,"ContinuedLine":false},{"LineNumber":106,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":39,"ContinuedLine":false},{"LineNumber":111,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":73,"ContinuedLine":false},{"LineNumber":112,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":47,"ContinuedLine":false},{"LineNumber":115,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":31,"ContinuedLine":false},{"LineNumber":116,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":31,"ContinuedLine":false},{"LineNumber":119,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":63,"ContinuedLine":false},{"LineNumber":123,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":30,"ContinuedLine":false},{"LineNumber":124,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":40,"ContinuedLine":false},{"LineNumber":125,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":31,"ContinuedLine":false},{"LineNumber":127,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":30,"ContinuedLine":false},{"LineNumber":128,"Hits":15,"StartColumnNumbers":2,"EndColumnNumbers":32,"ContinuedLine":true},{"LineNumber":129,"Hits":15,"StartColumnNumbers":4,"EndColumnNumbers":42,"ContinuedLine":true},{"LineNumber":130,"Hits":15,"StartColumnNumbers":4,"EndColumnNumbers":48,"ContinuedLine":true},{"LineNumber":131,"Hits":15,"StartColumnNumbers":4,"EndColumnNumbers":52,"ContinuedLine":true},{"LineNumber":133,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":58,"ContinuedLine":false},{"LineNumber":135,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":48,"ContinuedLine":false},{"LineNumber":137,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":68,"ContinuedLine":false},{"LineNumber":138,"Hits":15,"StartColumnNumbers":0,"EndColumnNumbers":53,"ContinuedLine":false}]}}